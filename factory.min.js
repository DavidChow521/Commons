"use strict";var fty={};fty.api={};fty.api.backCardNo=function(cardno,replacing,index){var i=4,r=" ";if(!that.IsNullOrEmpty(index)){if($.isNumeric(index)){i=index}}if(typeof(replacing)!==undefined&&$.trim(replacing)!==""){r=replacing}eval("var regex = /(\\d{"+i+"})(?=\\d)/g");return cardno.replace(/[\s]/g,"").replace(regex,"$1"+r)};fty.api.jsonDateTime=function(date,replacing,showtime){var r="-",s=true;if(typeof(replacing)!==undefined&&$.trim(replacing)!==""){r=replacing}if(typeof(showtime)!==undefined&&typeof(showtime)==="boolean"){s=showtime}function f(e){return e<10?"0"+e.toString():e}date=eval("new "+date.replace("/","","g").replace("/","","g"));var year=date.getFullYear(),month=f(date.getMonth()+1),dates=f(date.getDate()),hours=f(date.getHours()),minutes=f(date.getMinutes()),Seconds=f(date.getSeconds());if(s){return year+r+month+r+dates+" "+hours+":"+minutes+":"+Seconds}return year+r+month+r+dates};fty.api.moneyRoundOff=function(d,b,a){var c=2;if(!that.IsNullOrEmpty(b)){if($.isNumeric(b)){c=b}}if($.isNumeric(d)){if(!that.IsNullOrEmpty(a)){return a+(parseFloat(d)).toFixed(c)}return(parseFloat(d)).toFixed(c)}return null};fty.api.chinese=function(e){if(!/^\d*(\.\d*)?$/.test(e)){alert("Number is wrong!");return"Number is wrong!"}var b=new Array("零","壹","贰","叁","肆","伍","陆","柒","捌","玖");var h=new Array("","拾","佰","仟","万","億","点","");var c=(""+e).replace(/(^0*)/g,"").split("."),d=0,g="";for(var f=c[0].length-1;f>=0;f--){switch(d){case 0:g=h[7]+g;break;case 4:if(!new RegExp("0{4}\\d{"+(c[0].length-f-1)+"}$").test(c[0])){g=h[4]+g}break;case 8:g=h[5]+g;h[7]=h[5];d=0;break}if(d%4==2&&c[0].charAt(f+2)!=0&&c[0].charAt(f+1)==0){g=b[0]+g}if(c[0].charAt(f)!=0){g=b[c[0].charAt(f)]+h[d%4]+g}d++}if(c.length>1){g+=h[6];for(var f=0;f<c[1].length;f++){g+=b[c[1].charAt(f)]}}return g};fty.api.chineseAmt=function(c){if(!/^\d*(\.\d*)?$/.test(c)){return""}c=parseFloat(c).toFixed(2);var f=that.Chinese(c);var b=f.split("点");var d="";d+=(b[0]+"圆");if(b.length>1){for(var e=0;e<b[1].length;e++){d+=b[1][e];if(e==0){d+="角"}else{if(e==1){d+="分"}}}}else{d+="整"}return d};fty.api.trimAll=function(b,a){var d=true,b=$.trim(b);if(!that.IsNullOrEmpty(a)){d=a}if(d){return b.replace(/[\s]/g,"")}return b};fty.api.isNullOrEmpty=function(a){return a===undefined||a===null||a===""};fty.api.isNullOrWhiteSpace=function(a){return that.IsNullOrEmpty(a)||$.trim(String(a))===""};fty.api.isEmail=function(a){a=that.IsNullOrEmpty(a)?"":String(a);return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)};fty.api.isZipCode=function(a){a=that.IsNullOrEmpty(a)?"":String(a);return/^[\d]{6}$/.test(a)};fty.api.isChinese=function(a){a=that.IsNullOrEmpty(a)?"":String(a);return/^[\u0391-\uFFE5]+$/i.test(a)};fty.api.isEnglish=function(a){a=that.IsNullOrEmpty(a)?"":String(a);return/^[A-Za-z]+$/i.test(a)};fty.api.isExists=function(b){var c={};for(var a in b){if(c[b[a]]){return true}c[b[a]]=true}return false};fty.api.distinct=function(d){var c=[],e={};for(var b=0,a;(a=d[b])!=null;b++){if(!e[a]){c.push(a);e[a]=true}}return c};fty.api.format=function(){var d=that.IsNullOrEmpty(arguments[0])?"":String(arguments[0]);if($.isArray(arguments[1])){for(var a=0;a<arguments[1].length;a++){var c=arguments[1][a]?arguments[1][a]:"";d=d.replace(new RegExp("\\{"+a+"}","gm"),c)}}else{var b=$(arguments).slice(1,arguments.length);for(var a=0;a<b.length;a++){d=d.replace(new RegExp("\\{"+a+"}","gm"),b[a])}}return d};fty.api.newGuid=function(){function a(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(a()+a()+a()+a()+a()+a()+a()+a())};fty.api.basic=function(){var c,a;var b=function(e){e=e.toLowerCase();var d=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:d[1]||"",version:d[2]||"0"}};c=b(window.navigator.userAgent);a={};if(c.browser){a[c.browser]=true;a.version=c.version}if(a.chrome){a.webkit=true}else{if(a.webkit){a.safari=true}}return a};fty.api.request=function(a){var c=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i");var b=window.location.search.substr(1).match(c);if(b!=null){return unescape(b[2])}return null};fty.api.submit=function(c,a){var b=document.forms["_tools.Submit_"];if(b){b.innerHTML=""}else{b=document.createElement("form");b.name="_tools.Submit_";b.style="display:none";b.method="post";b.target="_blank"}b.id=that.Format("_Submit_{0}",new Date().getTime());b.action=c;$.each(a,function(f,e){var d=document.createElement("input");d.name=f;d.value=e;d.type="hidden";b.appendChild(d)});document.body.appendChild(b);b.submit()};fty.api.setCache=function(a,b){localStorage.setItem(a,b)};fty.api.getCache=function(a){return localStorage.getItem(a)};fty.api.removeCache=function(a){localStorage.removeItem(a)};fty.api.clearCache=function(){localStorage.clear()};fty.api.downloadCanvas=function(f,d,g){var c="image/png",e=that.NewGuid(),b=document.createElement("a");if(!that.IsNullOrEmpty(d)){e=d}b.download=e;if(!that.IsNullOrEmpty(g)){c=g}b.href=f.toDataURL(c);document.body.appendChild(b);b.click();document.body.removeChild(b)};